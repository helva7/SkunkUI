

<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Multi-page template</title>
	<style type = text/CSS>
	.ui-grid-solo {
	padding-top:.200em;
    font-size: 18px;
    line-height: 80px;
    font-weight: bold;
	}
	
	.ui-grid-c[data-role=fieldcontain] {
    font-size: 14px;
    line-height: 60px;
    font-weight: ;
	}
	.controlgroup-textinput{
    padding-top:.22em;
    padding-bottom:.22em;
	}
	</style>
	
	<style>
    .ui-content { margin: 0.5em auto; max-width: 1300px; width: 100%; font: 18px/1.5 sans-serif; }
    .ui-content { background: #f2f2f2; padding: 3px 5px; }
	</style>

<link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css" />
<script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
<script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>


</head>

<body>

<!-- Start of HOME PAGE: #welcome -->

<div data-role="page" id="welcome">

	<div data-role="header">
		<h1>Pet tracker</h1>
	</div><!-- /header -->

	<div role="main" class="ui-content">
	
		<h2>Where is my Charlie?</h2>

		<br>
		
        <p>Welcome to the application!</p>

		<h3>Please choose one of the following actions:</h3>
		
		<p><a href="#geo" class="ui-btn ui-shadow ui-corner-all">Set safe point</a></p>
		
		<p><a href="#map" class="ui-btn ui-shadow ui-corner-all">View live location</a></p>

	</div><!-- /content -->

	<div data-role="footer" data-theme="a">
		<h4>Page Footer</h4>
	</div><!-- /footer -->
	
</div><!-- /page welcome -->

<!-- END OF HOME PAGE: #welcome -->



<!-- Start of SECOND PAGE: #geo -->

<div data-role="page" id="geo" data-theme="a">

	<div data-role="header">
		<h1>GEO</h1>
	</div><!-- /header -->

	<div role="main" class="ui-content">
	
		<h2>GEO</h2>
		
		<div id=locationLL> </div>
		

		<div id="fenceMap" style="width:100%;height:600px;"></div>

		<script type="text/javascript">
			
			var map;
			
			var center;
			
			var currentInfoWindow;
			
			function dogMap() {
				
                // center in South Dublin
				var dublinSouth = new google.maps.LatLng( 53.1002,-6.2106 );
				
				//initial properties
				var mapProperties= {
				  center: dublinSouth,
				  zoom: 10,
				  mapTypeId: google.maps.MapTypeId.ROADMAP
				};
				
				// actual map with initial properties
				map = new google.maps.Map(document.getElementById("fenceMap"),mapProperties);
				
				
				
			/*	//marker
				var dogMarker = new google.maps.Marker({
					// current dog position
					position: new google.maps.LatLng( 53.279194, -6.2133575 ),
				});
				dogMarker.setMap(map);
				// Zoom to 9 when clicking on dog marker
				google.maps.event.addListener(dogMarker,'click',function() {
					var position = map.getZoom();
					map.setZoom(15);
					map.setCenter(dogMarker.getPosition());
					window.setTimeout(function() {
						map.setZoom(position);}, 5000);
				}); */
				
				
				
			}
			
			function addMarker(latitude, longitude) {
			
                        var position = new google.maps.LatLng(latitude, longitude);
						
						var bounds = new google.maps.LatLngBounds();
						
						//initial properties
						var mapProperties= {
						  mapTypeId: google.maps.MapTypeId.ROADMAP
						};
						
						//map = new google.maps.Map(document.getElementById("trackingMap"), mapProperties);
						//https://developers.google.com/maps/documentation/javascript/markers
                        var dogMarker = new google.maps.Marker({
                            position: position,
							zoom: -5,
                            map: map,
							label: 'S'
                        });
						
						
                        bounds.extend(dogMarker.getPosition());
						map.fitBounds(bounds);
						
						map.setZoom(14);
                        
            }
			

		</script>
		
		<p><a href="#welcome" data-direction="reverse" class="ui-btn ui-shadow ui-corner-all ui-btn-b">Back to page "one"</a></p>

	</div><!-- /content -->

	<div data-role="footer">
		<h4>Page Footer</h4>
	</div><!-- /footer -->
	
</div><!-- /page geo -->

<!-- END OF SECOND PAGE: #geo -->



<!-- Start of THIRD PAGE: #map -->

<div data-role="page" id="map" data-theme="a">

	<div data-role="header">
		<h1>MAP</h1>
	</div><!-- /header -->

	<div role="main" class="ui-content">
	
		<h2>MAP</h2>
		
		<div id=locationLL> </div>
		
		<script>
		
		window.setInterval('getMarker()', 3000); 	// Call a function every 3000 milliseconds (OR 3 seconds).
		
		function getMarker() {
			//updating the marker at loading
			$.post( "/location" )
				.done(function( data ) {
					var string = data;
					var result = string.split(";");
					
					var latitude = result[1];
					var longitude = result[3];
					
					addMarker(latitude, longitude);
					
					console.log(result[1]);
					console.log(result[3]);
					//$("#locationLL").html('latitude is: '+ latitude +' --- longitude is: ' + longitude);
				
				}); 	
		}
		</script>
		

		<div id="trackingMap" style="width:100%;height:600px;"></div>

		<script type="text/javascript">
			
			var map;
			
			var center;
			
			var currentInfoWindow;
			
			function dogMap() {
				
                // center in South Dublin
				var dublinSouth = new google.maps.LatLng( 53.1002,-6.2106 );
				
				//initial properties
				var mapProperties= {
				  center: dublinSouth,
				  zoom: 10,
				  mapTypeId: google.maps.MapTypeId.ROADMAP
				};
				
				// actual map with initial properties
				map = new google.maps.Map(document.getElementById("trackingMap"),mapProperties);
				
				
				
			/*	//marker
				var dogMarker = new google.maps.Marker({
					// current dog position
					position: new google.maps.LatLng( 53.279194, -6.2133575 ),
				});
				dogMarker.setMap(map);
				// Zoom to 9 when clicking on dog marker
				google.maps.event.addListener(dogMarker,'click',function() {
					var position = map.getZoom();
					map.setZoom(15);
					map.setCenter(dogMarker.getPosition());
					window.setTimeout(function() {
						map.setZoom(position);}, 5000);
				}); */
				
				
				
			}
			
			function addMarker(latitude, longitude) {
			
                        var position = new google.maps.LatLng(latitude, longitude);
						
						var bounds = new google.maps.LatLngBounds();
						
						//initial properties
						var mapProperties= {
						  mapTypeId: google.maps.MapTypeId.ROADMAP
						};
						
						//map = new google.maps.Map(document.getElementById("trackingMap"), mapProperties);
						//https://developers.google.com/maps/documentation/javascript/markers
                        var dogMarker = new google.maps.Marker({
                            position: position,
							zoom: -5,
                            map: map,
							label: 'S'
                        });
						
						
                        bounds.extend(dogMarker.getPosition());
						map.fitBounds(bounds);
						
						map.setZoom(14);
                        
            }
			

		</script>

		<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=XXX&callback=dogMap"></script>
		
		<p><a href="#welcome" data-direction="reverse" class="ui-btn ui-shadow ui-corner-all ui-btn-b">Back to page "one"</a></p>

	</div><!-- /content -->

	<div data-role="footer">
		<h4>Page Footer</h4>
	</div><!-- /footer -->
	
</div><!-- /page map -->

<!-- END OF SECOND PAGE: #map -->






<!-- Start of SECOND PAGE: #two -->

<div data-role="page" id="two" data-theme="a">

	<div data-role="header">
		<h1>Two</h1>
	</div><!-- /header -->

	<div role="main" class="ui-content">
		<h2>Two</h2>
		<p>I have an id of "two" on my page container. I'm the second page container in this multi-page template.</p>
		<p>Notice that the theme is different for this page because we've added a few <code>data-theme</code> swatch assigments here to show off how flexible it is. You can add any content or widget to these pages, but we're keeping these simple.</p>
		<p><a href="#one" data-direction="reverse" class="ui-btn ui-shadow ui-corner-all ui-btn-b">Back to page "one"</a></p>

	</div><!-- /content -->

	<div data-role="footer">
		<h4>Page Footer</h4>
	</div><!-- /footer -->
</div><!-- /page two -->

<!-- END OF SECOND PAGE: #two -->






</body>


</html>
